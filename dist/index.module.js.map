{"version":3,"file":"index.module.js","sources":["../../src/index.js"],"sourcesContent":["export const onStage = (actors, options) => {\n  const _elements =\n    typeof actors === 'string'\n      ? Array.from(document.querySelectorAll(actors))\n      : Array.isArray(actors)\n      ? actors\n      : [actors];\n\n  const onStageCallstack = [];\n  const leaveStageCallstack = [];\n\n  const observer = new IntersectionObserver((entries) => {\n    entries.forEach((entry) => {\n      if (entry.intersectionRatio > 0) {\n        onStageCallstack.forEach((c) => c(entry.target));\n        if (leaveStageCallstack.length <= 0) {\n          observer.unobserve(entry.target);\n        }\n      } else {\n        leaveStageCallstack.forEach((c) => c(entry.target));\n      }\n    });\n  }, options);\n\n  _elements.forEach((element) => {\n    observer.observe(element);\n  });\n\n  const api = (stack) => {\n    return {\n      addClass(className) {\n        stack.push((e) => e.classList.add(className));\n        return this;\n      },\n      removeClass(className) {\n        stack.push((e) => e.classList.remove(className));\n        return this;\n      },\n      toggle(className) {\n        if (stack === onStageCallstack) {\n          onStageCallstack.push((e) => e.classList.add(className));\n          leaveStageCallstack.push((e) => e.classList.remove(className));\n        } else {\n          leaveStageCallstack.push((e) => e.classList.add(className));\n          onStageCallstack.push((e) => e.classList.remove(className));\n        }\n        return this;\n      },\n      do(fun) {\n        stack.push(fun);\n        return this;\n      },\n      end() {\n        stack.push(() => observer.disconnect());\n        return this;\n      },\n    };\n  };\n\n  return {\n    ...api(onStageCallstack),\n    else: {\n      ...api(leaveStageCallstack),\n    },\n  };\n};\n"],"names":["onStage","actors","options","_elements","Array","from","document","querySelectorAll","isArray","onStageCallstack","leaveStageCallstack","observer","IntersectionObserver","entries","forEach","entry","intersectionRatio","c","target","length","unobserve","element","observe","api","stack","addClass","className","push","e","classList","add","removeClass","remove","toggle","fun","end","disconnect","else"],"mappings":"+MAAaA,IAAAA,EAAU,SAACC,EAAQC,GAC9B,IAAMC,EACc,iBAAXF,EACHG,MAAMC,KAAKC,SAASC,iBAAiBN,IACrCG,MAAMI,QAAQP,GACdA,EACA,CAACA,GAEDQ,EAAmB,GACnBC,EAAsB,GAEtBC,EAAW,IAAIC,qBAAqB,SAACC,GACzCA,EAAQC,QAAQ,SAACC,GACXA,EAAMC,kBAAoB,GAC5BP,EAAiBK,QAAQ,SAACG,UAAMA,EAAEF,EAAMG,UACpCR,EAAoBS,QAAU,GAChCR,EAASS,UAAUL,EAAMG,SAG3BR,EAAoBI,QAAQ,SAACG,UAAMA,EAAEF,EAAMG,aAG9ChB,GAEHC,EAAUW,QAAQ,SAACO,GACjBV,EAASW,QAAQD,KAGnB,IAAME,EAAM,SAACC,GACX,MAAO,CACLC,kBAASC,GAEP,OADAF,EAAMG,KAAK,SAACC,UAAMA,EAAEC,UAAUC,IAAIJ,WAGpCK,qBAAYL,GAEV,OADAF,EAAMG,KAAK,SAACC,UAAMA,EAAEC,UAAUG,OAAON,WAGvCO,gBAAOP,GAQL,OAPIF,IAAUf,GACZA,EAAiBkB,KAAK,SAACC,UAAMA,EAAEC,UAAUC,IAAIJ,KAC7ChB,EAAoBiB,KAAK,SAACC,UAAMA,EAAEC,UAAUG,OAAON,OAEnDhB,EAAoBiB,KAAK,SAACC,UAAMA,EAAEC,UAAUC,IAAIJ,KAChDjB,EAAiBkB,KAAK,SAACC,UAAMA,EAAEC,UAAUG,OAAON,wBAIjDQ,GAED,OADAV,EAAMG,KAAKO,SAGbC,eAEE,OADAX,EAAMG,KAAK,kBAAMhB,EAASyB,uBAMhC,YACKb,EAAId,IACP4B,UACKd,EAAIb"}